<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Generator K3S BEJI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            color: #334e68;
            position: relative;
            min-height: 100vh;
        }

        /* --- DYNAMIC BACKGROUND SHAPES --- */
        .background-shapes { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; pointer-events: none; }
        .shape { position: absolute; opacity: 0.1; filter: blur(2px); }
        .shape-circle { width: 80px; height: 80px; border-radius: 50%; background: #3b82f6; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); }
        .shape-square { width: 60px; height: 60px; background: #8b5cf6; border-radius: 16px; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3); }
        .shape-triangle { width: 0; height: 0; border-left: 40px solid transparent; border-right: 40px solid transparent; border-bottom: 70px solid #10b981; filter: drop-shadow(0 4px 6px rgba(16, 185, 129, 0.3)); }
        .shape-x { font-size: 60px; font-weight: 900; color: #f59e0b; text-shadow: 0 4px 10px rgba(245, 158, 11, 0.3); line-height: 1; font-family: sans-serif; }
        
        .s1 { top: 15%; left: 5%; animation: float-up 18s infinite; }
        .s2 { top: 20%; left: 85%; animation: float-down 23s infinite; }
        .s3 { top: 85%; left: 10%; animation: float-up 25s infinite; }
        .s4 { top: 65%; left: 80%; animation: float-down 20s infinite; }
        @keyframes float-up { 0%,100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-100px) rotate(180deg); } }
        @keyframes float-down { 0%,100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(100px) rotate(-180deg); } }

        /* --- UI COMPONENTS --- */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.1);
        }

        /* --- INPUT STYLES (Standard CSS for Reliability) --- */
        .input-frame {
            background-color: white;
            padding: 1.5rem;
            border-radius: 1.5rem;
            border: 2px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            height: 100%;
            transition: border-color 0.3s;
        }
        .input-frame:hover { border-color: #bfdbfe; }

        .form-label {
            display: block;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            margin-bottom: 0.5rem;
            margin-left: 0.25rem;
        }

        /* Input Fields */
        .input-container { position: relative; width: 100%; }
        .input-icon {
            position: absolute;
            top: 0; bottom: 0; left: 0;
            display: flex; align-items: center; padding-left: 1.25rem;
            pointer-events: none; color: #94a3b8; font-size: 1.25rem;
        }
        /* Icon adjustment for textareas */
        .textarea-icon { top: 1.25rem; bottom: auto; }

        .styled-input {
            width: 100%;
            padding-left: 3.5rem; padding-right: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 1rem;
            background-color: #f8fafc;
            font-size: 0.95rem;
            color: #334155;
            transition: all 0.2s;
            outline: none;
        }
        .styled-input:focus {
            border-color: #3b82f6;
            background-color: white;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        /* Tinggi Khusus */
        input.styled-input { height: 3.5rem; }
        textarea.styled-input { min-height: 160px; padding-top: 1rem; padding-bottom: 1rem; resize: vertical; }

        /* --- CARD SELECTION LOGIC (Standard CSS Fix) --- */
        /* Base Card Style */
        .selection-card {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 1rem;
            background-color: #f8fafc;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }
        
        .selection-card:hover {
            border-color: #93c5fd;
            background-color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* Checked State Logic */
        input[type="radio"]:checked + .selection-card {
            border-color: #2563eb; /* blue-600 */
            background-color: #eff6ff; /* blue-50 */
            box-shadow: 0 0 0 2px #dbeafe; /* ring effect */
        }

        /* Icon & Text Changes on Check */
        input[type="radio"]:checked + .selection-card .card-icon {
            transform: scale(1.1);
            filter: grayscale(0%);
        }
        input[type="radio"]:checked + .selection-card .card-text {
            color: #1d4ed8;
            font-weight: 800;
        }
        
        /* Checkmark Badge */
        .check-badge {
            position: absolute; top: 6px; right: 6px;
            color: #2563eb; font-size: 14px;
            opacity: 0; transform: scale(0);
            transition: all 0.2s;
        }
        input[type="radio"]:checked + .selection-card .check-badge {
            opacity: 1; transform: scale(1);
        }

        /* Specific Styling for Subject Icons */
        .card-icon { font-size: 1.5rem; margin-bottom: 0.25rem; transition: transform 0.2s; filter: grayscale(100%); opacity: 0.7; }
        .card-text { font-size: 0.75rem; color: #64748b; font-weight: 500; transition: color 0.2s; }
        
        /* Active State for Icons (Override grayscale) */
        input[type="radio"]:checked + .selection-card .card-icon { filter: grayscale(0%); opacity: 1; }

        /* Grade Card Specifics */
        .grade-text { font-size: 1.25rem; color: #64748b; font-weight: 600; }
        input[type="radio"]:checked + .selection-card .grade-text { color: #15803d; /* green-700 */ }
        input[type="radio"]:checked + .selection-card.grade-mode { border-color: #16a34a; background-color: #f0fdf4; }

        /* Device & Orientation Horizontal Cards */
        .horiz-card {
            flex-direction: row; justify-content: flex-start; gap: 1rem; padding: 1rem; text-align: left;
        }
        .horiz-card i { font-size: 1.5rem; color: #94a3b8; }
        input[type="radio"]:checked + .horiz-card i { color: #2563eb; }

        /* --- PREVIEW STYLES --- */
        .split-screen { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; flex-grow: 1; width: 100%; height: 100%; padding: 0 10px; }
        .single-screen { display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; }
        .single-screen .panel-soal { max-width: 600px; width: 100%; height: 95%; }

        .question-box { background: white; border: 1px solid #e2e8f0; border-bottom: 4px solid #cbd5e1; border-radius: 16px; padding: 30px 20px; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 600; color: #334155; position: relative; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .question-badge { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #3b82f6, #6366f1); color: white; font-size: 10px; padding: 4px 16px; border-radius: 20px; font-weight: 800; border: 2px solid white; box-shadow: 0 4px 6px rgba(99, 102, 241, 0.3); }
        
        .panel-progress-fill { transition: width 1s ease-in-out; }
        .fill-left { background: linear-gradient(90deg, #3b82f6, #60a5fa); }
        .fill-right { background: linear-gradient(90deg, #6366f1, #818cf8); }
        
        .confetti { position: fixed; width: 10px; height: 10px; z-index: 9999; animation: fall 3s linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
        .modal-overlay { position: fixed; inset: 0; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(8px); display: flex; align-items: center; justify-content: center; z-index: 5000; }
        pre { white-space: pre-wrap; word-wrap: break-word; font-size: 11px; line-height: 1.4; }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- DYNAMIC BACKGROUND SHAPES -->
    <div class="background-shapes">
        <div class="shape shape-circle s1"></div><div class="shape shape-triangle s2"></div><div class="shape shape-square s3"></div>
        <div class="shape shape-x s4">‚úï</div><div class="shape shape-circle s5"></div><div class="shape shape-triangle s6"></div>
        <div class="shape shape-x s7">‚úï</div><div class="shape shape-square s8"></div><div class="shape shape-circle s9"></div>
    </div>

    <!-- Section: Login -->
    <div id="login-section" class="flex items-center justify-center h-screen">
        <div class="glass-panel p-10 rounded-3xl shadow-2xl w-96 transform transition-all hover:scale-[1.02]">
            <div class="text-center mb-8">
                <div class="inline-block p-4 rounded-full bg-white border-2 border-blue-50 mb-6 shadow-md">
                    <img src="https://i.imghippo.com/files/xYek7566NhY.png" alt="Logo K3S" class="h-24 md:h-32 w-auto object-contain">
                </div>
                <h1 class="text-2xl font-black text-slate-800 tracking-tight">GAME GENERATOR</h1>
                <div class="h-1 w-24 bg-gradient-to-r from-blue-400 to-indigo-500 mx-auto rounded-full mt-3 mb-3"></div>
                <p class="text-indigo-600 font-bold tracking-[0.2em] text-sm">BEJI PASURUAN</p>
            </div>
            
            <div class="space-y-5">
                <!-- Separate Inputs (Desain Awal) -->
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-400"><i class="fa-regular fa-user text-lg"></i></div>
                    <input type="text" id="username" placeholder="Username" class="w-full pl-12 pr-4 h-14 border-2 border-slate-200 rounded-xl bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all font-medium text-slate-700">
                </div>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-pink-400"><i class="fa-solid fa-lock text-lg"></i></div>
                    <input type="password" id="password" placeholder="Password" class="w-full pl-12 pr-4 h-14 border-2 border-slate-200 rounded-xl bg-white focus:border-pink-500 focus:ring-2 focus:ring-pink-100 outline-none transition-all font-medium text-slate-700">
                </div>

                <button onclick="handleLogin()" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-bold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg shadow-blue-200 transform active:scale-95 flex items-center justify-center gap-2 text-lg">
                    MASUK SISTEM <i class="fa-solid fa-arrow-right-to-bracket"></i>
                </button>
            </div>
            <p id="login-error" class="text-red-500 text-xs mt-4 text-center hidden font-medium bg-red-50 py-2 rounded-lg border border-red-100">
                <i class="fa-solid fa-circle-exclamation mr-1"></i> Username atau Password salah!
            </p>
        </div>
    </div>

    <!-- Section: Generator Form -->
    <div id="generator-section" class="hidden min-h-screen p-4 md:p-8">
        <div class="max-w-7xl mx-auto glass-panel rounded-[2.5rem] shadow-2xl p-6 md:p-12">
            
            <!-- UNIFIED HEADER (Satu Kesatuan) -->
            <div class="flex justify-center mb-10">
                <div class="bg-white px-8 py-5 rounded-[2.5rem] shadow-xl border border-slate-100 flex items-center gap-6 transform hover:scale-[1.02] transition duration-300">
                    <img src="https://i.imghippo.com/files/xYek7566NhY.png" alt="Logo K3S" class="h-16 md:h-20 w-auto drop-shadow-sm">
                    <div class="h-14 w-[2px] bg-slate-100 rounded-full"></div>
                    <div class="text-left flex flex-col justify-center">
                        <h2 class="text-3xl md:text-4xl font-black text-slate-800 leading-none tracking-tight">K3S BEJI <span class="text-blue-600">CREATOR</span></h2>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="bg-green-100 text-green-700 text-[10px] font-bold px-2 py-0.5 rounded-md">V2.0</span>
                            <p class="text-slate-400 font-bold text-xs tracking-widest uppercase">GENERATOR MEDIA INTERAKTIF</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Kolom Kiri: Identitas -->
                <div class="input-frame">
                    <div class="frame-title">
                        <div class="bg-indigo-100 text-indigo-600 w-10 h-10 flex items-center justify-center rounded-xl shadow-sm"><i class="fa-solid fa-fingerprint"></i></div> 
                        Identitas Aplikasi
                    </div>
                    
                    <div class="mb-6">
                        <label class="form-label">Nama Aplikasi</label>
                        <div class="input-container">
                            <div class="input-icon text-purple-500"><i class="fa-solid fa-gamepad"></i></div>
                            <input type="text" id="gen-app-name" placeholder="Contoh: Petualangan Matematika Seru" class="styled-input">
                        </div>
                    </div>
                    
                    <!-- MATA PELAJARAN (Multiple Choice Grid - FIX) -->
                    <div class="mb-6">
                        <label class="form-label">Mata Pelajaran (Pilih Satu)</label>
                        <div class="grid grid-cols-3 gap-3">
                            <label class="relative">
                                <input type="radio" name="subject_select" value="Pendidikan Agama" class="absolute opacity-0 w-0 h-0" checked>
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üïå</span>
                                    <span class="card-text">Agama</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="PPKn" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üáÆüá©</span>
                                    <span class="card-text">PPKn</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="Bahasa Indonesia" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üìö</span>
                                    <span class="card-text">B. Indo</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="Matematika" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üìê</span>
                                    <span class="card-text">MTK</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="IPA" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üî¨</span>
                                    <span class="card-text">IPA</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="IPS" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üåç</span>
                                    <span class="card-text">IPS</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="PJOK" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">‚öΩ</span>
                                    <span class="card-text">PJOK</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="Seni Budaya" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üé®</span>
                                    <span class="card-text">Seni</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="subject_select" value="Bahasa Inggris" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card h-24">
                                    <div class="check-badge"><i class="fa-solid fa-circle-check"></i></div>
                                    <span class="card-icon">üÖ∞Ô∏è</span>
                                    <span class="card-text">Inggris</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- KELAS (Multiple Choice Grid - FIX) -->
                    <div class="mb-6">
                        <label class="form-label">Kelas</label>
                        <div class="grid grid-cols-6 gap-2">
                            <label class="relative">
                                <input type="radio" name="grade_select" value="1" class="absolute opacity-0 w-0 h-0" checked>
                                <div class="selection-card grade-mode h-14">
                                    <span class="grade-text">1</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="grade_select" value="2" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card grade-mode h-14">
                                    <span class="grade-text">2</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="grade_select" value="3" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card grade-mode h-14">
                                    <span class="grade-text">3</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="grade_select" value="4" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card grade-mode h-14">
                                    <span class="grade-text">4</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="grade_select" value="5" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card grade-mode h-14">
                                    <span class="grade-text">5</span>
                                </div>
                            </label>
                            <label class="relative">
                                <input type="radio" name="grade_select" value="6" class="absolute opacity-0 w-0 h-0">
                                <div class="selection-card grade-mode h-14">
                                    <span class="grade-text">6</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="form-label">Tujuan Pembelajaran</label>
                        <div class="input-container">
                            <div class="input-icon textarea-icon text-red-500"><i class="fa-solid fa-bullseye"></i></div>
                            <textarea id="gen-objective" class="styled-input" placeholder="Tuliskan tujuan pembelajaran secara lengkap disini..."></textarea>
                        </div>
                    </div>

                    <div>
                        <label class="form-label">Link Logo (Opsional)</label>
                        <div class="input-container">
                            <div class="input-icon text-gray-500"><i class="fa-solid fa-link"></i></div>
                            <input type="text" id="gen-logo" placeholder="https://..." class="styled-input">
                        </div>
                    </div>
                </div>

                <!-- Kolom Kanan: Konten & Teknis (WITH FRAME) -->
                <div class="content-frame space-y-8">
                    <div class="frame-title">
                        <div class="bg-indigo-100 text-indigo-600 w-10 h-10 flex items-center justify-center rounded-xl shadow-sm"><i class="fa-solid fa-sliders"></i></div>
                        Konfigurasi Teknis
                    </div>

                    <div class="mb-6">
                        <label class="form-label">Materi Spesifik</label>
                        <div class="input-container">
                            <div class="input-icon textarea-icon text-orange-500"><i class="fa-solid fa-layer-group"></i></div>
                            <textarea id="gen-material" class="styled-input" placeholder="Jelaskan topik materi utama dan cakupan soal..."></textarea>
                        </div>
                    </div>

                    <!-- Pilihan Device & Orientasi -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="form-label">Mode Perangkat</label>
                            <div class="flex flex-col gap-3">
                                <label class="relative">
                                    <input type="radio" name="devicemode" value="IFP" class="absolute opacity-0 w-0 h-0" checked>
                                    <div class="selection-card horiz-card">
                                        <i class="fa-solid fa-desktop"></i>
                                        <div class="flex flex-col">
                                            <span class="text-sm font-bold text-slate-600">IFP</span>
                                            <span class="text-[10px] text-slate-400">Split Screen</span>
                                        </div>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="devicemode" value="Mobile" class="absolute opacity-0 w-0 h-0">
                                    <div class="selection-card horiz-card">
                                        <i class="fa-solid fa-mobile-screen"></i>
                                        <div class="flex flex-col">
                                            <span class="text-sm font-bold text-slate-600">Seluler</span>
                                            <span class="text-[10px] text-slate-400">Single Screen</span>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="form-label">Orientasi</label>
                            <div class="flex flex-col gap-3">
                                <label class="relative">
                                    <input type="radio" name="orientation" value="Landscape" class="absolute opacity-0 w-0 h-0" checked>
                                    <div class="selection-card horiz-card">
                                        <i class="fa-regular fa-image"></i>
                                        <span class="text-sm font-bold text-slate-600">Landscape</span>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="orientation" value="Portrait" class="absolute opacity-0 w-0 h-0">
                                    <div class="selection-card horiz-card">
                                        <i class="fa-solid fa-mobile"></i>
                                        <span class="text-sm font-bold text-slate-600">Portrait</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Visual & Interaction -->
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div>
                            <label class="form-label">Gaya Visual</label>
                            <div class="flex flex-col gap-2">
                                <label class="flex items-center gap-3 p-3 border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-300 transition">
                                    <input type="checkbox" name="gametype" value="Flat" class="w-5 h-5 text-blue-600 rounded" checked>
                                    <span class="text-xs font-bold text-slate-600">Flat Design</span>
                                </label>
                                <label class="flex items-center gap-3 p-3 border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-300 transition">
                                    <input type="checkbox" name="gametype" value="2D" class="w-5 h-5 text-blue-600 rounded">
                                    <span class="text-xs font-bold text-slate-600">2D Cartoon</span>
                                </label>
                                <label class="flex items-center gap-3 p-3 border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-300 transition">
                                    <input type="checkbox" name="gametype" value="3D" class="w-5 h-5 text-blue-600 rounded">
                                    <span class="text-xs font-bold text-slate-600">3D Assets</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="form-label">Mode Interaksi</label>
                            <div class="flex flex-col gap-2">
                                <label class="flex items-center gap-3 p-3 border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-300 transition">
                                    <input type="radio" name="interaction" value="abcd" class="w-5 h-5 text-blue-600" checked>
                                    <span class="text-xs font-bold text-slate-600">Pilihan A-D</span>
                                </label>
                                <label class="flex items-center gap-3 p-3 border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-300 transition">
                                    <input type="radio" name="interaction" value="abc" class="w-5 h-5 text-blue-600">
                                    <span class="text-xs font-bold text-slate-600">Pilihan A-C</span>
                                </label>
                                <label class="flex items-center gap-3 p-3 border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-300 transition">
                                    <input type="radio" name="interaction" value="calc" class="w-5 h-5 text-blue-600">
                                    <span class="text-xs font-bold text-slate-600">Kalkulator</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Fitur Gambar -->
                    <div class="p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl border border-blue-100 flex items-center justify-between shadow-sm mb-6">
                        <div class="flex items-center gap-3">
                            <div class="bg-white p-2.5 rounded-lg text-blue-500 shadow-sm"><i class="fa-regular fa-image text-lg"></i></div>
                            <div>
                                <div class="text-sm font-bold text-slate-700">Fitur Gambar Soal</div>
                                <div class="text-[10px] text-slate-500 font-medium mt-0.5">Tampilkan ilustrasi di setiap soal</div>
                            </div>
                        </div>
                        <input type="checkbox" id="gen-images" class="w-6 h-6 text-blue-600 rounded border-gray-300">
                    </div>

                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="form-label">Jumlah Soal</label>
                            <div class="input-container">
                                <div class="input-icon text-gray-400"><i class="fa-solid fa-arrow-up-9-1"></i></div>
                                <input type="number" id="gen-count" value="10" class="styled-input">
                            </div>
                        </div>
                        <div>
                            <label class="form-label">Footer</label>
                            <div class="input-container">
                                <div class="input-icon text-gray-400"><i class="fa-regular fa-copyright"></i></div>
                                <input type="text" id="gen-footer" value="K3S BEJI 2026" class="styled-input">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="mt-14 pt-8 border-t border-gray-100">
                <button onclick="generateNarration()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-5 rounded-2xl font-black text-2xl hover:from-green-600 hover:to-emerald-700 shadow-xl shadow-green-200 transition-all flex items-center justify-center gap-4 transform hover:scale-[1.01] group">
                    <span class="group-hover:animate-pulse">‚ú®</span> 
                    GENERATE JSON PROMPT 
                    <i class="fa-solid fa-wand-magic-sparkles ml-2 group-hover:rotate-12 transition"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Section: Output Narasi & Visualisasi -->
    <div id="narration-section" class="hidden landscape-container">
        <!-- Header Output with Elegant Logo -->
        <div class="bg-white/95 backdrop-blur-md border-b p-4 flex justify-between items-center shadow-sm h-16 z-20">
            <div class="flex items-center gap-3">
                <div class="bg-white p-1.5 rounded-xl border border-blue-50 shadow-sm">
                    <img src="https://i.imghippo.com/files/xYek7566NhY.png" class="h-10 md:h-12 w-auto object-contain">
                </div>
                <div>
                    <h2 class="text-xl font-black text-slate-800 tracking-tight leading-none">HASIL <span class="text-blue-600">JSON</span></h2>
                    <p class="text-[10px] text-gray-400 font-bold tracking-widest">K3S CREATOR</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button onclick="showInstructions()" class="bg-yellow-100 text-yellow-700 border border-yellow-300 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-yellow-200 transition">
                    <i class="fa-solid fa-book-open"></i> Panduan
                </button>
                <button onclick="backToGenerator()" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-xl font-bold text-sm hover:bg-gray-200 transition">
                    <i class="fa-solid fa-arrow-left mr-1"></i> Kembali
                </button>
                <button onclick="triggerWin()" class="bg-green-100 text-green-700 border border-green-200 px-4 py-2 rounded-xl font-bold text-sm hover:bg-green-200 transition">
                    <i class="fa-solid fa-play mr-1"></i> Simulasi
                </button>
            </div>
        </div>

        <div class="flex flex-1 overflow-hidden p-4 gap-6 relative z-10">
            <!-- Left: JSON Content -->
            <div class="w-1/3 flex flex-col h-full relative">
                <div class="content-frame !p-0 !border-0 flex flex-col shadow-none bg-transparent">
                    <div class="flex justify-between items-center p-3 bg-slate-800 text-white rounded-t-2xl sticky top-0 z-10">
                        <h3 class="font-bold text-sm flex items-center gap-2"><i class="fa-solid fa-code"></i> JSON Prompt</h3>
                        <button onclick="copyToClipboard()" id="btn-copy" class="bg-blue-600 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-blue-500 transition-all">
                            <i class="fa-regular fa-copy"></i> <span id="btn-copy-text">Salin</span>
                        </button>
                    </div>
                    
                    <div class="bg-slate-900 p-4 overflow-x-auto flex-1 rounded-b-2xl border-x border-b border-slate-700">
                        <pre id="narration-text" class="text-xs leading-relaxed text-emerald-400 font-mono select-all">
                            <!-- Konten JSON Akan Muncul Di Sini -->
                        </pre>
                    </div>
                    
                    <div class="mt-2 p-3 bg-blue-50 rounded-xl border border-blue-200 text-xs text-blue-700 flex items-start gap-2">
                        <i class="fa-solid fa-circle-info mt-0.5"></i>
                        <span>Salin kode JSON di atas, lalu tempel (Paste) ke <b>Gemini</b>, <b>ChatGPT</b>, atau <b>Claude</b> untuk membuat game.</span>
                    </div>
                </div>
            </div>

            <!-- Right: Preview -->
            <div class="w-2/3 flex flex-col gap-4">
                <div class="bg-white/90 backdrop-blur-md p-5 rounded-3xl shadow-xl border border-white/50 flex flex-col flex-1 relative overflow-hidden">
                    <div class="absolute top-3 right-3 bg-slate-100 text-slate-500 text-[10px] font-bold px-3 py-1 rounded-full border border-slate-200 uppercase tracking-wide">PREVIEW LAYOUT</div>
                    
                    <div class="flex justify-between items-end mb-6 border-b border-gray-100 pb-4">
                        <div class="flex items-center gap-4">
                            <!-- ICON CONTAINER -->
                            <div id="visual-icon" class="w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-3xl shadow-lg shadow-blue-200 text-white">
                                üéÆ
                            </div>
                            <div>
                                <span class="text-[10px] font-bold text-gray-400 uppercase tracking-wider">Judul Aplikasi</span>
                                <div class="text-2xl font-black text-slate-800 leading-none" id="visual-app-name">NAMA GAME</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-[10px] font-bold text-blue-500 bg-blue-50 px-2 py-1 rounded uppercase" id="visual-device-mode">IFP MODE</span>
                            <div class="text-lg font-bold text-gray-600" id="visual-grade">Kelas X</div>
                        </div>
                    </div>

                    <!-- Dynamic Layout Container -->
                    <div id="layout-preview-container" class="split-screen mt-2">
                        <!-- Panel Kiri / Single Main Panel -->
                        <div id="panel-a" class="question-box !h-full !justify-between !items-stretch !p-4 !bg-blue-50/30 !border-blue-200">
                            <div>
                                <span id="label-player-a" class="bg-blue-100 text-blue-700 text-[10px] font-bold px-3 py-1 rounded-full mb-3 inline-block">PLAYER A</span>
                                <!-- Progress Bar A -->
                                <div class="mb-4">
                                    <div class="flex justify-between text-[9px] text-slate-500 font-bold mb-1">
                                        <span id="label-progres-a">PROGRES</span>
                                        <span id="score-text-a">0%</span>
                                    </div>
                                    <div class="panel-progress-track">
                                        <div id="visual-bar-a" class="panel-progress-fill fill-left"></div>
                                    </div>
                                </div>
                                <!-- Area Soal -->
                                <div class="bg-white border border-blue-200 rounded-xl p-4 shadow-sm text-center min-h-[80px] flex items-center justify-center relative">
                                    <div class="question-badge">SOAL #1</div>
                                    <span id="preview-content-a" class="text-sm font-bold text-slate-600">Pertanyaan Acak Muncul Disini</span>
                                </div>
                            </div>
                            <!-- Tombol -->
                            <div class="p-3 border-2 border-dashed border-blue-200 rounded-xl bg-blue-50/50 w-full flex items-center justify-center mt-2">
                                <div class="text-[10px] text-center text-blue-400 font-mono font-bold" id="preview-buttons-a">[AREA INTERAKSI]</div>
                            </div>
                        </div>

                        <!-- Panel Kanan -->
                        <div id="panel-b" class="question-box !h-full !justify-between !items-stretch !p-4 !bg-indigo-50/30 !border-indigo-200">
                            <div>
                                <span class="bg-indigo-100 text-indigo-700 text-[10px] font-bold px-3 py-1 rounded-full mb-3 inline-block">PLAYER B</span>
                                <!-- Progress Bar B -->
                                <div class="mb-4">
                                    <div class="flex justify-between text-[9px] text-slate-500 font-bold mb-1">
                                        <span>PROGRES</span>
                                        <span id="score-text-b">0%</span>
                                    </div>
                                    <div class="panel-progress-track">
                                        <div id="visual-bar-b" class="panel-progress-fill fill-right"></div>
                                    </div>
                                </div>
                                <!-- Area Soal -->
                                <div class="bg-white border border-indigo-200 rounded-xl p-4 shadow-sm text-center min-h-[80px] flex items-center justify-center relative">
                                    <div class="question-badge" style="background: #6366f1;">SOAL #1</div>
                                    <span id="preview-content-b" class="text-sm font-bold text-slate-600">Pertanyaan Acak B Muncul Disini</span>
                                </div>
                            </div>
                            <!-- Tombol -->
                            <div class="p-3 border-2 border-dashed border-indigo-200 rounded-xl bg-indigo-50/50 w-full flex items-center justify-center mt-2">
                                <div class="text-[10px] text-center text-indigo-400 font-mono font-bold" id="preview-buttons-b">[AREA INTERAKSI]</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-center flex items-center justify-center gap-2 opacity-50">
                        <img id="visual-footer-logo" src="https://i.imghippo.com/files/xYek7566NhY.png" class="h-3 grayscale">
                        <p class="text-[9px] text-gray-400 font-bold tracking-widest" id="visual-footer">FOOTER CONTENT</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Instruction Modal -->
    <div id="instruction-modal" class="hidden modal-overlay">
        <div class="bg-white rounded-3xl shadow-2xl max-w-3xl w-full mx-4 overflow-hidden border border-white/40">
            <div class="bg-blue-600 p-5 text-white flex justify-between items-center">
                <h3 class="font-bold text-lg flex items-center gap-2"><i class="fa-solid fa-book"></i> Panduan Pembuatan</h3>
                <button onclick="closeInstructions()" class="text-white/80 hover:text-white transition text-xl">&times;</button>
            </div>
            <div class="p-8 space-y-6 max-h-[70vh] overflow-y-auto bg-gray-50">
                <div class="flex items-start gap-5 p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                    <div class="bg-blue-100 text-blue-700 font-black w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-lg">1</div>
                    <div><h4 class="font-bold text-gray-800 text-lg">Generate JSON</h4><p class="text-sm text-gray-600 mt-1">Lengkapi formulir lalu klik tombol hijau besar <b>"GENERATE JSON SPEC"</b>.</p></div>
                </div>
                <div class="flex items-start gap-5 p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                    <div class="bg-blue-100 text-blue-700 font-black w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-lg">2</div>
                    <div><h4 class="font-bold text-gray-800 text-lg">Salin Kode</h4><p class="text-sm text-gray-600 mt-1">Di halaman hasil, klik tombol biru <b>"Salin"</b>.</p></div>
                </div>
                <div class="flex items-start gap-5 p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                    <div class="bg-blue-100 text-blue-700 font-black w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 text-lg">3</div>
                    <div><h4 class="font-bold text-gray-800 text-lg">Paste di AI</h4><p class="text-sm text-gray-600 mt-1">Buka <b>Gemini/ChatGPT</b>. Tempel kode tersebut. AI akan membuatkan file HTML game.</p></div>
                </div>
            </div>
            <div class="p-5 border-t bg-white text-right">
                <button onclick="closeInstructions()" class="bg-slate-800 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-900 transition">Saya Mengerti</button>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcome-modal" class="hidden fixed inset-0 bg-slate-900/80 backdrop-blur-md flex items-center justify-center z-[2000] p-4">
        <div class="bg-white p-10 rounded-[2.5rem] shadow-2xl text-center max-w-lg border-t-8 border-blue-600 relative overflow-hidden">
            <div class="relative z-10">
                <div class="bg-blue-50 inline-block p-4 rounded-full mb-6">
                    <img src="https://i.imghippo.com/files/xYek7566NhY.png" class="h-20 mx-auto">
                </div>
                <h2 class="text-3xl font-black text-gray-800 mb-3">AKSES BERHASIL!</h2>
                <p class="text-gray-500 mb-8 leading-relaxed font-medium">Selamat datang di <b>GENERATOR MEDIA K3S BEJI</b>.</p>
                <button onclick="closeModal()" class="bg-blue-600 text-white px-10 py-4 rounded-2xl font-bold hover:bg-blue-700 transition w-full shadow-lg shadow-blue-200">MULAI SEKARANG</button>
            </div>
        </div>
    </div>

    <script>
        const DEFAULT_LOGO = "https://i.imghippo.com/files/xYek7566NhY.png";

        function handleLogin() {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;
            if(user === "game" && pass === "beji") {
                document.getElementById('login-section').classList.add('hidden');
                document.getElementById('generator-section').classList.remove('hidden');
                document.getElementById('welcome-modal').classList.remove('hidden');
            } else {
                const err = document.getElementById('login-error');
                err.classList.remove('hidden');
                setTimeout(() => err.classList.add('hidden'), 3000);
            }
        }

        function closeModal() { document.getElementById('welcome-modal').classList.add('hidden'); }
        function showInstructions() { document.getElementById('instruction-modal').classList.remove('hidden'); }
        function closeInstructions() { document.getElementById('instruction-modal').classList.add('hidden'); }

        function copyToClipboard() {
            const text = document.getElementById('narration-text').innerText;
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed"; textArea.style.left = "-9999px";
            document.body.appendChild(textArea); textArea.focus(); textArea.select();
            try {
                if (document.execCommand('copy')) showCopyFeedback();
                else navigator.clipboard.writeText(text).then(showCopyFeedback);
            } catch (err) { alert("Gagal menyalin manual."); }
            document.body.removeChild(textArea);
        }

        function showCopyFeedback() {
            const btn = document.getElementById('btn-copy');
            const btnText = document.getElementById('btn-copy-text');
            const icon = btn.querySelector('i');
            btn.classList.replace('bg-blue-600','bg-green-600');
            btnText.innerText = "Tersalin!";
            icon.classList.replace('fa-copy','fa-check');
            setTimeout(() => {
                btn.classList.replace('bg-green-600','bg-blue-600');
                btnText.innerText = "Salin";
                icon.classList.replace('fa-check','fa-copy');
            }, 2000);
        }

        function getSubjectIcon(subject) {
            const icons = {'Pendidikan Agama': 'üïå', 'PPKn': 'üáÆüá©', 'Bahasa Indonesia': 'üìö', 'Matematika': 'üìê', 'IPA': 'üî¨', 'IPS': 'üåç', 'PJOK': '‚öΩ', 'Seni Budaya': 'üé®', 'Bahasa Inggris': 'üÖ∞Ô∏è'};
            return icons[subject] || 'üéì';
        }

        function generateNarration() {
            const appName = document.getElementById('gen-app-name').value || "Project Tanpa Nama";
            const subjectInput = document.querySelector('input[name="subject_select"]:checked');
            const subject = subjectInput ? subjectInput.value : "Umum";
            const gradeInput = document.querySelector('input[name="grade_select"]:checked');
            const grade = gradeInput ? gradeInput.value : "X";
            const objective = document.getElementById('gen-objective').value || "Belum ditentukan";
            const material = document.getElementById('gen-material').value || "Materi Umum";
            const count = document.getElementById('gen-count').value;
            const footer = document.getElementById('gen-footer').value;
            const customLogo = document.getElementById('gen-logo').value.trim() || DEFAULT_LOGO;
            const useImages = document.getElementById('gen-images').checked;
            const deviceMode = document.querySelector('input[name="devicemode"]:checked').value;
            const orientation = document.querySelector('input[name="orientation"]:checked').value;
            const interactionMode = document.querySelector('input[name="interaction"]:checked').value;
            
            let interactionDesc = "", buttonPreviewText = "";
            if (interactionMode === "abcd") { interactionDesc = "Pilihan Ganda A-D"; buttonPreviewText = "[ A ] [ B ] [ C ] [ D ]"; }
            else if (interactionMode === "abc") { interactionDesc = "Pilihan Ganda A-C"; buttonPreviewText = "[ A ] [ B ] [ C ]"; }
            else if (interactionMode === "calc") { interactionDesc = "Keypad Kalkulator"; buttonPreviewText = "[ 7 8 9 ] [ 4 5 6 ] [ 1 2 3 ]"; }

            const subjectIcon = getSubjectIcon(subject);
            let layoutDesc = deviceMode === "IFP" ? `${orientation} Fullscreen (Split Screen)` : `${orientation} Viewport (Single Screen)`;
            
            // UI Update Logic
            if (deviceMode === "IFP") {
                document.getElementById('visual-device-mode').innerText = "IFP MODE (SPLIT)";
                const container = document.getElementById('layout-preview-container');
                container.classList.remove('single-screen'); container.classList.add('split-screen');
                document.getElementById('panel-b').classList.remove('hidden');
                document.getElementById('label-player-a').innerText = "PLAYER A";
                document.getElementById('label-progres-a').innerText = "PROGRES TIM A";
            } else {
                document.getElementById('visual-device-mode').innerText = "SELULER";
                const container = document.getElementById('layout-preview-container');
                container.classList.remove('split-screen'); container.classList.add('single-screen');
                document.getElementById('panel-b').classList.add('hidden');
                document.getElementById('label-player-a').innerText = "SINGLE PLAYER";
                document.getElementById('label-progres-a').innerText = "SKOR";
            }

            const gameSpec = {
                "role": "Senior Front-End Developer",
                "task": "Create HTML5 Educational Game",
                "context": { "appName": appName, "target": `Kelas ${grade} SD`, "subject": `${subject} ${subjectIcon}`, "topic": material },
                "design": { "layout": layoutDesc, "style": "Modern, Clean, Child-friendly" },
                "gameplay": { "interaction": interactionDesc, "images": useImages, "questions": count },
                "assets": { "logo": customLogo, "footer": footer }
            };

            document.getElementById('narration-text').innerText = JSON.stringify(gameSpec, null, 2);
            document.getElementById('visual-app-name').innerText = appName.toUpperCase();
            document.getElementById('visual-grade').innerText = `KELAS ${grade}`;
            document.getElementById('visual-footer').innerText = footer;
            document.getElementById('visual-icon').innerText = subjectIcon;
            document.getElementById('visual-footer-logo').src = customLogo;

            const imgIcon = useImages ? '<div class="mb-2 text-2xl text-blue-300 opacity-50"><i class="fa-regular fa-image"></i></div>' : '';
            document.getElementById('preview-content-a').innerHTML = `${imgIcon}Soal ${material}`;
            document.getElementById('preview-content-b').innerHTML = `${imgIcon}Soal ${material}`;
            document.getElementById('preview-buttons-a').innerText = buttonPreviewText;
            document.getElementById('preview-buttons-b').innerText = buttonPreviewText;
            
            document.getElementById('visual-bar-a').style.width = "0%"; document.getElementById('visual-bar-b').style.width = "0%";
            document.getElementById('score-text-a').innerText = "0%"; document.getElementById('score-text-b').innerText = "0%";
            
            document.getElementById('generator-section').classList.add('hidden');
            document.getElementById('narration-section').classList.remove('hidden');
            
            setTimeout(() => { document.getElementById('visual-bar-a').style.width = "40%"; document.getElementById('score-text-a').innerText = "40%"; }, 500);
            if(deviceMode === "IFP") setTimeout(() => { document.getElementById('visual-bar-b').style.width = "70%"; document.getElementById('score-text-b').innerText = "70%"; }, 800);
        }

        function backToGenerator() {
            document.getElementById('narration-section').classList.add('hidden');
            document.getElementById('generator-section').classList.remove('hidden');
        }

        function triggerWin() {
            document.getElementById('visual-bar-a').style.width = "100%";
            document.getElementById('visual-bar-b').style.width = "100%";
            document.getElementById('score-text-a').innerText = "100%";
            document.getElementById('score-text-b').innerText = "100%";
            
            for(let i=0; i<100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + "vw";
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 50%)`;
                confetti.style.animationDuration = (Math.random() * 2 + 1) + "s";
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 4000);
            }
            const winBanner = document.createElement('div');
            winBanner.className = "fixed inset-0 flex items-center justify-center z-[5000]";
            winBanner.innerHTML = `<div class="bg-white p-8 rounded-3xl shadow-2xl border-4 border-yellow-400 text-center animate-bounce"><img src="${document.getElementById('visual-footer-logo').src}" class="h-16 mx-auto mb-4"><h2 class="text-3xl font-black text-gray-800">SIMULASI MENANG! üèÜ</h2><p class="text-blue-600 font-bold mt-2">K3S BEJI PASURUAN</p></div>`;
            document.body.appendChild(winBanner);
            setTimeout(() => winBanner.remove(), 3500);
        }
    </script>
</body>
</html>
